<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Insert title here</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous">
      	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    
    
    <script>
      $(document).ready(function() {
        $("#btn-write").on("click", function() {
          location.href="/board/boardWrite";
        });

        $("#democlicknav").on("click", function() {
          $("#democlick").trigger("click");
        })

        $('#myModal').modal('show'); 

      })
    </script>

  </head>
  <body>
    <header th:include="layout/header :: header"></header>
    <main class="container mt-5">
      <div class="row">
        <div class="col-10">
      <div class="p-5 bg-primary bg-opacity-25 rounded">
        <h1 class="text-center">게시판</h1>
      </div>
      <div class="my-3">
        <div class="row bg-warning">
          <div class="col-2">번호</div>
          <div class="col-2">제목</div>
          <div class="col-2">내용</div>
          <div class="col-2">아이디</div>
          <div class="col-4">등록일</div>
        </div>

        <div class="row border" th:if="${#lists.size(data)} > 0" th:each="data : ${data.getList()}">
          <div class="col-2">
            <a
              href="/board/boardDetail?idx="
              th:attrappend="href=${data.idx}"
              class="text-decoration-none"
              th:text="${data.idx}"
              >idx</a
            >
          </div>
          <div class="col-2">
            <a
              href="/board/boardDetail?idx="
              th:attrappend="href=${data.idx}"
              class="text-decoration-none"s
              th:text="${data.title}"
              >title</a
            >
          </div>
          <div class="col-2" th:text="${data.contents}">contents</div>
          <div class="col-2" th:text="${data.userId}">userId</div>
          <div class="col-4" th:text="${data.createdDate}">createdDt</div>
        </div>
		<div th:unless="${#lists.size(data)} > 0">
			게시물이 없습니다
		</div>
        <div class="my-3 clearfix">
          <form
            action="/board/boardSearch"
            method="get"
            class="mt-3 float-start"
          >
            <input type="text" name="search" class="form-control" placeholder="아이디를 입력하세요" />
            <button
            type="submit"
            class="btn btn-primary my-3 float-start btn-warning"
          >
            검색
          </form>
          <button type="button" id ="btn-write" class="btn btn-primary my-3 float-end">
            글쓰기
          </button>
        </div>
        
        <!-- 페이징 -->
        <div>
			<ul class="pagination justify-content-center">
				<li class="page-item" th:classappend="${data.getPrePage() == 0} ? 'disabled'">
					<a class="page-link" th:href="@{/board/boardList(pageNum=${data.getPrePage()})}">Prev</a>
				</li>
				<li class="page-item" th:each="page : ${#numbers.sequence(data.getNavigateFirstPage(), data.getNavigateLastPage())}" th:classappend="${page == data.getPageNum()} ? 'active'">
					<a class="page-link" th:text="${page}" th:href="@{/board/boardList(pageNum=${page})}"></a>
				</li>
				<li class="page-item" th:classappend="${data.getNextPage() == 0} ? 'disabled'">
					<a class="page-link" th:href="@{/boardList(pageNum=${data.getNextPage()})}">Next</a>
				</li>
			</ul>
		</div>
      </div>
    </div>

<!-- 사이드 바 -->
    <div class="col-2">
		  <button type="button" id = "democlick" data-bs-toggle="collapse" data-bs-target="#demo" hidden>collapse</button>
      <div id = "demo" class="collapse">
        <div th:if ="${session.userId == null}">
          <form action="/login/login" method="method">
            <input type="text" name = "userId" placeholder="id" class="form-control">
            <input type="password" name = "userPw" placeholder="pw" class="form-control">
            <button type="submit" class="btn btn-primary mt-1">로그인</button>
          </form>
          <div>
            <a href="/login/findpw" class="btn btn-secondary mt-1">비밀번호 찾기</a>
            <a href="/login/signUp" class="btn btn-secondary mt-1">회원 가입</a>
          </div>
        </div>  
        <div th:if ="${session.userId != null}">        
          <p th:text="${session.userId}+'님'">유저명</p>
       <a href="/login/myPage" class="btn btn-outline-primary my-1">내 정보</a>
       <a href="/login/logout" class="btn btn-outline-primary">로그 아웃</a>

          <!-- Button trigger modal -->
          <button type="button" class="btn btn-success mt-1" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
              메세지 보기
            </button>  
          <a href="/login/sendMsg" class="d-block text-decoration-none">메세지 보내기</a>
        </div>
      </div>

    </div>
  </div>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">메세지</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table class="table-striped">
          <colgroup>
            <col width="20%">
            <col width="20%">
            <col width="20%">
            <col width="20%">
          </colgroup>
          <thead>
            <tr>
              <th>번호</th>
              <th>보낸이</th>
              <th>내용</th>
              <th>보낸시간</th>
            </tr>
            
          </thead>
          <tbody>
            <tr th:if="${#lists.size(data)} > 0">
              <td>1</td>
              <td>a</td>
              <td>c</td>
              <td>1234</td>
            </tr>
            <tr th:unless="${#lists.size(data)} > 0"></tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary float-start" data-bs-dismiss="modal">닫기</button>
      </div>
    </div>
  </div>
</div>
 
    </main>
    <footer th:include="layout/footer :: footer"></footer>
  </body>
</html>
